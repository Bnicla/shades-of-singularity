---
import DarkModeToggle from './DarkModeToggle.astro';
---

<header class="site-header">
  <div class="site-header-inner">
    <a href="/" class="site-title">Shades of Singularity</a>

    <nav class="site-nav" aria-label="Main navigation">
      <a href="/the-29-shades/">The 29 Shades</a>
      <a href="/essays/">Essays</a>
      <a href="/blueprint/">Blueprint</a>
      <a href="/about/">About</a>
      <DarkModeToggle />
    </nav>

    <div class="mobile-menu-toggle">
      <DarkModeToggle />
      <button id="menu-toggle" aria-label="Toggle menu" aria-expanded="false">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
          <line x1="3" y1="6" x2="21" y2="6" stroke-width="1.5" />
          <line x1="3" y1="12" x2="21" y2="12" stroke-width="1.5" />
          <line x1="3" y1="18" x2="21" y2="18" stroke-width="1.5" />
        </svg>
      </button>
    </div>
  </div>

  <nav class="mobile-nav" id="mobile-menu" aria-label="Mobile navigation">
    <a href="/the-29-shades/">The 29 Shades</a>
    <a href="/essays/">Essays</a>
    <a href="/blueprint/">Blueprint</a>
    <a href="/about/">About</a>
  </nav>
</header>

<script>
  const btn = document.getElementById('menu-toggle');
  const menu = document.getElementById('mobile-menu');
  btn?.addEventListener('click', () => {
    const expanded = btn.getAttribute('aria-expanded') === 'true';
    btn.setAttribute('aria-expanded', String(!expanded));
    menu?.classList.toggle('is-open');
  });
</script>
